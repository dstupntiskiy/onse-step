<div class="dialog">
    <div class="event-dialog-header">
        <h1 mat-dialog-title>{{ data.title }}</h1>
        <div>
            <span class="event-day">{{ day }}</span>
        </div>
    </div>
    <form [formGroup]="eventForm">
    <mat-form-field class="input event-name">
        <input matInput placeholder="Название" formControlName="name">
    </mat-form-field>
    <div class="fields-row">
        <mat-checkbox formControlName="isRecur" (change)="changeIsRecur($event.checked)">
            Еженедельное событие
        </mat-checkbox>
        <ng-container *ngIf="isRecur?.value">
            <mat-form-field class="event-start">
                <mat-label>Дни недели</mat-label>
                <mat-select  formControlName="weekdays" multiple>
                    @for (option of weekDaysList; track option){
                        <mat-option [value]="option">{{option.name}}</mat-option>
                    }
                </mat-select>
            </mat-form-field>
        </ng-container>
    </div>
    <ng-container *ngIf="isRecur?.value">
        <div class="fields-row">
            <mat-form-field class="recur-start">
                <input matInput [matDatepicker]="pickerStart" formControlName="recurStart">
                <mat-datepicker-toggle matIconSuffix [for]="pickerStart"></mat-datepicker-toggle>
                <mat-datepicker #pickerStart></mat-datepicker>
            </mat-form-field>
            <mat-form-field class="recur-end">
                <input matInput [matDatepicker]="pickerEnd" formControlName="recurEnd">
                <mat-datepicker-toggle matIconSuffix [for]="pickerEnd"></mat-datepicker-toggle>
                <mat-datepicker #pickerEnd></mat-datepicker>
            </mat-form-field>
        </div>
    </ng-container>
    <div class="fields-row period">
        <mat-form-field class="event-start">
            <mat-label>Время начала</mat-label>
            <mat-select  formControlName="start" >
                @for (option of timeOptions; track option){
                    <mat-option [value]="option">{{option}}</mat-option>
                }
            </mat-select>
        </mat-form-field>
        <mat-form-field class="event-end">
            <mat-label>Время окончания</mat-label>
            <mat-select formControlName="end" >
                @for (option of timeOptions; track option){
                    <mat-option [value]="option">{{option}}</mat-option>
                }
            </mat-select>
        </mat-form-field>
    </div>
    <mat-form-field class="event-group">
        <mat-label>Группа</mat-label>
        <mat-select formControlName="group" >
            @for (option of groups; track option){
                <mat-option [value]="option">{{option.name}}</mat-option>
            }
        </mat-select>
    </mat-form-field>
    <div class="actions" mat-dialog-actions>
        <div class="actions-left">
            <button *ngIf="!isNew" mat-raised-button color="warn" (click)="onDelete()">Удалить</button>
        </div>
        <div class="actions-right">
            <button mat-button (click)="onCloseClick()">Закрыть</button>
            <button mat-raised-button color="accent" (click)="submit()">Сохранить</button>
        </div>
    </div>
    </form>
</div>